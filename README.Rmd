---
title: "d3r: Data-Driven Documents (D3) in R Ecosystem"
output: github_document
---

## Introduction

<div style="display: flex; align-items: center;">
  <img src="https://upload.wikimedia.org/wikipedia/commons/1/15/Logo_D3.svg" style="height: 150px; margin-right: 10px;">
  <img src="https://upload.wikimedia.org/wikipedia/commons/1/1b/R_logo.svg" style="height: 150px;">
</div>

</br>

`d3r` is an R package designed to seamlessly integrate D3.js into your R ecosystem, enabling dynamic and interactive data visualizations. Whether you're working in RStudio, Shiny, Quarto, Jupyter, Selenium, or plain HTML, `d3r` provides an easy way to create, embed, and interact with D3.js-based charts, graphs, and visualizations without needing deep JavaScript knowledge.

# Installation

``` {r, eval = FALSE}
devtools::install_github("JacekPardyak/d3r", upgrade = "never")
```

```{r, echo=FALSE}
give <- function(source_path){
  destination_dir <- "./man"
  file.copy(source_path, destination_dir)
  file.path(destination_dir, basename(source_path)) |> knitr::include_graphics()
}
```

## Usage

In these usage examples, we use `Selenium` mode to take screenshots of documents generated by D3.js. Check the `tests` folder for additional live examples in different modes. This `d3r` showcase in `Quarto` will blow you away :rocket: 

```{r}
library(d3r)
# Sample hierarchical data
data = '{
  name: "Root",
  children: [
    { name: "A", value: 100 },
    { name: "B", value: 200 },
    { name: "C", value: 50 },
    { 
      name: "D", 
      children: [
        { name: "D1", value: 30 },
        { name: "D2", value: 70 }
      ]
    }
  ]
}'

# CSS style
style = '
 text {
  font-size: 24px;
  fill: black;
  text-anchor: middle;
}
'

# JavaScript
script = '// Set SVG dimensions
const width = 600, height = 600;

// Create SVG inside the div
const svg = d3.select("#container")
  .append("svg")
  .attr("width", width)
  .attr("height", height);
      
// Create a hierarchical layout
const root = d3.hierarchy(data)
  .sum(d => d.value)  // Aggregate values for sizing
  .sort((a, b) => b.value - a.value);
    
const pack = d3.pack()
  .size([width - 20, height - 20])
  .padding(5);
    
pack(root);
    
// Draw circles
const node = svg.selectAll("circle")
  .data(root.descendants())
  .enter().append("circle")
  .attr("cx", d => d.x)
  .attr("cy", d => d.y)
  .attr("r", d => d.r)
  .style("fill", (d, i) => d.depth === 0 ? "#ddd" : d.depth === 1 ? "#69b3a2" : "#ff9999")
  .style("stroke", "#333")
  .style("opacity", 0.8);
    
// Add labels
svg.selectAll("text")
  .data(root.descendants())
  .enter().append("text")
  .attr("x", d => d.x)
  .attr("y", d => d.y)
  .attr("dy", "0.3em")
  .text(d => d.children ? "" : d.data.name); // Hide labels for parent nodes
' 
make(script = script, 
     data = data, 
     style = style, 
     mode = "selenium", 
     title = "D3.js Circular Packing") |> give()
```


